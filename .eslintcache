[{"C:\\Users\\OGOYI\\artifacts\\src\\index.js":"1","C:\\Users\\OGOYI\\artifacts\\src\\App.js":"2","C:\\Users\\OGOYI\\artifacts\\src\\reportWebVitals.js":"3","C:\\Users\\OGOYI\\artifacts\\src\\components\\NewArtifacts.js":"4","C:\\Users\\OGOYI\\artifacts\\src\\components\\Artifacts.js":"5","C:\\Users\\OGOYI\\artifacts\\src\\components\\Navbar.js":"6"},{"size":480,"mtime":1645619425382,"results":"7","hashOfConfig":"8"},{"size":4570,"mtime":1658871061781,"results":"9","hashOfConfig":"8"},{"size":362,"mtime":1645619164806,"results":"10","hashOfConfig":"8"},{"size":1439,"mtime":1658904210394,"results":"11","hashOfConfig":"8"},{"size":1349,"mtime":1658904028512,"results":"12","hashOfConfig":"8"},{"size":842,"mtime":1658871712414,"results":"13","hashOfConfig":"8"},{"filePath":"14","messages":"15","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"k1d08e",{"filePath":"16","messages":"17","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"18"},{"filePath":"19","messages":"20","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"21","messages":"22","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"23","messages":"24","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"25"},{"filePath":"26","messages":"27","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\OGOYI\\artifacts\\src\\index.js",[],"C:\\Users\\OGOYI\\artifacts\\src\\App.js",["28","29","30"],"import './App.css';\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport Navbar from \"./components/Navbar\";\r\nimport { useState, useEffect, useCallback } from \"react\";\r\n\r\n\r\n\r\n\r\nimport Web3 from \"web3\";\r\nimport { newKitFromWeb3 } from \"@celo/contractkit\";\r\nimport BigNumber from \"bignumber.js\";\r\nimport IERC from \"./contract/IERC.abi.json\";\r\nimport artifact from  './contract/artifact.abi.json';\r\nimport NewArtifacts from './components/NewArtifacts';\r\nimport Artifacts from './components/Artifacts';\r\n\r\n\r\nconst ERC20_DECIMALS = 18;\r\n\r\n\r\nconst contractAddress = \"0x1eE84b939e37d95451616A1346AF5F5297f9BDEE\";\r\nconst cUSDContractAddress = \"0x874069Fa1Eb16D44d622F2e0Ca25eeA172369bC1\";\r\n\r\n\r\n\r\n\r\nfunction App() {\r\n\r\n  const [contract, setcontract] = useState(null);\r\n  const [address, setAddress] = useState(null);\r\n  const [kit, setKit] = useState(null);\r\n  const [cUSDBalance, setcUSDBalance] = useState(0);\r\n  const [artifacts, setArtifacts] = useState([]);\r\n\r\n  const connectToWallet = async () => {\r\n    if (window.celo) {\r\n      try {\r\n        await window.celo.enable();\r\n        const web3 = new Web3(window.celo);\r\n        let kit = newKitFromWeb3(web3);\r\n\r\n        const accounts = await kit.web3.eth.getAccounts();\r\n        const user_address = accounts[0];\r\n\r\n        kit.defaultAccount = user_address;\r\n\r\n        await setAddress(user_address);\r\n        await setKit(kit);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    } else {\r\n      console.log(\"Error Occurred\");\r\n      \r\n     }\r\n   };\r\n \r\n    \r\n   const getBalance = (async () => {\r\n    try {\r\n      const balance = await kit.getTotalBalance(address);\r\n      const USDBalance = balance.cUSD.shiftedBy(-ERC20_DECIMALS).toFixed(2);\r\n      const contract = new kit.web3.eth.Contract(artifact, contractAddress);\r\n      setcontract(contract);\r\n      setcUSDBalance(USDBalance);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  });\r\n\r\n \r\n       \r\n   const getArtifact =  async () => {\r\n    const artifactsLength = await contract.methods.getartifactslength().call();\r\n    console.log(artifactsLength);\r\n    const _artifactt = []\r\n    for (let index = 0; index < artifactsLength; index++) {\r\n      console.log(artifactsLength);\r\n      let _artifacts= new Promise(async (resolve, reject) => {\r\n      let artifact = await contract.methods.getArtifact(index).call();\r\n\r\n      resolve({\r\n       index: index,\r\n       owner: artifact[0],\r\n       image: artifact[1],\r\n       name:  artifact[2],\r\n       description: artifact[3],\r\n      price: artifact[4]\r\n      \r\n                \r\n     });\r\n   });\r\n   _artifactt.push(_artifacts);\r\n }\r\n const _artifacts = await Promise.all(_artifactt);\r\n setArtifacts(_artifacts);\r\n console.log(artifacts)\r\n \r\n};\r\n\r\nuseEffect(() => {\r\n  connectToWallet();\r\n}, []);\r\n\r\nuseEffect(() => {\r\n  if (kit && address) {\r\n    getBalance();\r\n   \r\n  }\r\n}, [kit, address]);\r\n\r\nuseEffect(() => {\r\n  if (contract) {\r\n    getArtifact();\r\n  }\r\n}, [contract]);  \r\n\r\nconst ReformArtifactImage = async (_index, _newAge) => {\r\n  console.log(_index);\r\n  try {\r\n    await contract.methods.ReformArtifactImage(_index, _newAge).send({ from: address });\r\n    getArtifact();\r\n    getBalance();\r\n  } catch (error) {\r\n   console.log(error);\r\n   alert(\"The Artifact image has succesfully been changed\")\r\n  }};\r\n\r\n\r\nconst addArtifact = async (\r\n  _image,\r\n  _name,\r\n  _description,\r\n  price\r\n) => {\r\n\r\n  const _price = new BigNumber(price).shiftedBy(ERC20_DECIMALS).toString();\r\n    try {\r\n      await contract.methods\r\n        .addArtifact(_image, _name, _description, _price)\r\n        .send({ from: address });\r\n       getArtifact();\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n   \r\n\r\n     \r\n    \r\n\r\n\r\n      \r\n  const buyArtifact = async (_index,) => {\r\n    try {\r\n      const cUSDContract = new kit.web3.eth.Contract(IERC, cUSDContractAddress);\r\n    \r\n      \r\n      await cUSDContract.methods\r\n        .approve(contractAddress, artifacts[_index].price)\r\n        .send({ from: address });\r\n      await contract.methods.buyArtifact(_index).send({ from: address });\r\n      getArtifact();\r\n      getBalance();\r\n    } catch (error) {\r\n      console.log(error)\r\n    }};\r\n\r\n  \r\n\r\n\r\n\r\n  return (\r\n    <div>\r\n      <Navbar balance = {cUSDBalance} />\r\n      <Artifacts artifacts ={artifacts}\r\n      buyArtifact = {buyArtifact}\r\n      ReformArtifactImage = {ReformArtifactImage}\r\n     \r\n      onlyOwner={address}\r\n       \r\n       \r\n      \r\n       \r\n      />\r\n       <NewArtifacts addArtifact = {addArtifact}\r\n       \r\n/>\r\n    </div>\r\n    )\r\n  }\r\n\r\nexport  default App;\r\n","C:\\Users\\OGOYI\\artifacts\\src\\reportWebVitals.js",[],"C:\\Users\\OGOYI\\artifacts\\src\\components\\NewArtifacts.js",[],"C:\\Users\\OGOYI\\artifacts\\src\\components\\Artifacts.js",["31"],"\r\nimport React from 'react';\r\nimport { useState } from 'react';\r\n\r\n \r\n  \r\n \r\n\r\nconst Artifacts = (props) => {\r\n\r\n  const [newImage, ChangeImage] = useState('');\r\n  const submitHandler = (e) => {\r\n    e.preventDefault();}\r\n \r\n  return (\r\n    <div className='conatainer-fluid d-flex justify-content-center'> \r\n    <div className='row'> \r\n    {props.artifacts.map((art) => (\r\n    <div className='col-md-4' key={art.index}> \r\n    <div className='card text-center'>\r\n      <div className='overflow'>\r\n        <img src={art.image} alt='img'/>\r\n      </div>\r\n      <div className='card-body text-dark'>\r\n        <h4 className='card-name'>Card Name {art.name}</h4>\r\n        <p className='card-text text-seconadry'>Description {art.description}</p>\r\n        <h4 className='price'>price {art.price / 1000000000000000000}cUSD</h4>\r\n        <a href='/#' className='btn btn-outline-success' onClick={() => props.bookArifact(art.index)}>Buy Artifact</a>\r\n\r\n        <input class=\"form-control form-control-lg\"  onChange={(e) => ChangeImage(e.target.value)} type=\"text\" placeholder=\"Add new Venue\"></input>\r\n               <button class=\"btn btn-primary mb-2\"  onClick={() => props.ReformArtifactImage(art.index, newImage)}>Change Venue</button>\r\n      </div>\r\n    </div>\r\n    </div>\r\n    ))}\r\n    </div>\r\n    </div>\r\n  )\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n\r\nexport default Artifacts;","C:\\Users\\OGOYI\\artifacts\\src\\components\\Navbar.js",[],{"ruleId":"32","severity":1,"message":"33","line":4,"column":31,"nodeType":"34","messageId":"35","endLine":4,"endColumn":42},{"ruleId":"36","severity":1,"message":"37","line":110,"column":4,"nodeType":"38","endLine":110,"endColumn":18,"suggestions":"39"},{"ruleId":"36","severity":1,"message":"40","line":116,"column":4,"nodeType":"38","endLine":116,"endColumn":14,"suggestions":"41"},{"ruleId":"32","severity":1,"message":"42","line":12,"column":9,"nodeType":"34","messageId":"35","endLine":12,"endColumn":22},"no-unused-vars","'useCallback' is defined but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'getBalance'. Either include it or remove the dependency array.","ArrayExpression",["43"],"React Hook useEffect has a missing dependency: 'getArtifact'. Either include it or remove the dependency array.",["44"],"'submitHandler' is assigned a value but never used.",{"desc":"45","fix":"46"},{"desc":"47","fix":"48"},"Update the dependencies array to be: [kit, address, getBalance]",{"range":"49","text":"50"},"Update the dependencies array to be: [contract, getArtifact]",{"range":"51","text":"52"},[2861,2875],"[kit, address, getBalance]",[2947,2957],"[contract, getArtifact]"]